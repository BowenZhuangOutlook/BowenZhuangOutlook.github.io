<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>GoldenGate Big Data 实验 | 尚武</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/8.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">GoldenGate Big Data 实验</h1><a id="logo" href="/.">尚武</a><p class="description">炳文博客</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 主页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/tasks/"><i class="fa fa-tasks"> 任务</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">GoldenGate Big Data 实验</h1><div class="post-meta">Jul 19, 2018<span> | </span><span class="category"><a href="/categories/技术/">技术</a></span></div><div class="clear"><div class="toc-article" id="toc"><div class="toc-title">文章目录</div><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#GoldenGate-Big-Data-实验"><span class="toc-number">1.</span> <span class="toc-text">GoldenGate Big Data 实验</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Install-GoldenGate-Big-Data"><span class="toc-number">1.1.</span> <span class="toc-text">Install GoldenGate Big Data</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Source-Extract-Configure"><span class="toc-number">1.2.</span> <span class="toc-text">Source Extract Configure</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#GoldenGate-Replicate-to-Redshift"><span class="toc-number">1.3.</span> <span class="toc-text">GoldenGate Replicate to Redshift</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#GoldenGate-Replicate-to-Flat-file"><span class="toc-number">1.4.</span> <span class="toc-text">GoldenGate Replicate to Flat file</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#GoldenGate-Replicate-to-Flume"><span class="toc-number">1.5.</span> <span class="toc-text">GoldenGate Replicate to Flume</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Flume-Configure-and-Start"><span class="toc-number">1.5.1.</span> <span class="toc-text">Flume Configure and Start</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#OGG-Big-Data-Replicat-to-Flume"><span class="toc-number">1.5.2.</span> <span class="toc-text">OGG Big Data Replicat to Flume</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#GoldenGate-Replicate-to-Kafka"><span class="toc-number">1.6.</span> <span class="toc-text">GoldenGate Replicate to Kafka</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Kafka-Configure-and-Start"><span class="toc-number">1.6.1.</span> <span class="toc-text">Kafka Configure and Start</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#OGG-Big-Data-Replicat-to-Kafka"><span class="toc-number">1.6.2.</span> <span class="toc-text">OGG Big Data Replicat to Kafka</span></a></li></ol></li></ol></li></ol></div></div><div class="post-content"><h1 id="GoldenGate-Big-Data-实验"><a href="#GoldenGate-Big-Data-实验" class="headerlink" title="GoldenGate Big Data 实验"></a>GoldenGate Big Data 实验</h1><hr>
<h2 id="Install-GoldenGate-Big-Data"><a href="#Install-GoldenGate-Big-Data" class="headerlink" title="Install GoldenGate Big Data"></a>Install GoldenGate Big Data</h2><ol>
<li>Request Install JDK 8 on OS</li>
<li><p>Configure Variables on OS</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">export JAVA_HOME=/usr/java/jdk1.8.0_121 </span><br><span class="line">export JRE_HOME=/usr/java/jdk1.8.0_121/jre</span><br><span class="line">export CLASSPATH=$JAVA_HOME/lib:$JRE_HOME/lib:./</span><br><span class="line">export GG_HOME=/data/oggbg</span><br><span class="line">export LD_LIBRARY_PATH=$JAVA_HOME/lib:$JAVA_HOME/jre/lib:$JAVA_HOME/jre/lib/amd64/server:$JAVA_HOME/jre/lib/amd64:$GG_HOME:$GG_HOME/lib</span><br><span class="line">export PATH=$JAVA_HOME/bin:$JAVA_HOME/jre/lib:$PATH:$GG_HOME</span><br></pre></td></tr></table></figure>
</li>
<li><p>Installation Steps</p>
<ul>
<li><p>Create an installation directory that has no spaces in its name. Then extract the ZIP file into this new installation directory. For example:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Shell&gt; mkdir installation_directory </span><br><span class="line">Shell&gt; cp path/to/installation_zip installation_directory </span><br><span class="line">Shell&gt; cd installation_directory </span><br><span class="line">Shell&gt; unzip installation_zip </span><br><span class="line">Shell&gt; tar -xf installation_tar</span><br></pre></td></tr></table></figure>
</li>
<li><p>Stay on the installation directory and bring up GGSCI to create the remaining subdirectories in the installation location</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Shell&gt; ggsci </span><br><span class="line">GGSCI&gt; CREATE SUBDIRS</span><br></pre></td></tr></table></figure>
</li>
<li><p>Create a Manager parameter file:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">GGSCI&gt; EDIT PARAM MGR </span><br><span class="line">PORT 7809</span><br><span class="line">DYNAMICPORTLIST 7810-7909</span><br></pre></td></tr></table></figure>
</li>
<li><p>Go to GGSCI, start the Manager, and check to see that it is running:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">GGSCI&gt;START MGR </span><br><span class="line">GGSCI&gt;INFO MGR</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
<h2 id="Source-Extract-Configure"><a href="#Source-Extract-Configure" class="headerlink" title="Source Extract Configure"></a>Source Extract Configure</h2><ol>
<li><p>Configure Capture Extract Process and Pump Extract Process</p>
<ul>
<li><p>Capture Extract Process Parameter<br><strong>Name:</strong> <code>egaehio.prm</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">extract EGAEHIO </span><br><span class="line">statoptions reportfetch</span><br><span class="line">reportcount 15 minutes, rate</span><br><span class="line">encrypttrail AES128</span><br><span class="line">dynamicresolution </span><br><span class="line">useridalias ggadmin</span><br><span class="line">logallsupcols</span><br><span class="line">updaterecordformat compact</span><br><span class="line">tranlogoptions includeregionid</span><br><span class="line">dboptions allowunusedcolumn</span><br><span class="line">GETTRUNCATES</span><br><span class="line">exttrail ./dirdat/ga</span><br><span class="line">table EHTEMP.OGG_HADOOP_TEST;</span><br><span class="line">table EHTEMP.EMPLOYEES;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Pump Extract Process Parameter<br><strong>Name:</strong> <code>pga_ga.prm</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">extract PGA_GA</span><br><span class="line">passthru</span><br><span class="line">dynamicresolution</span><br><span class="line">reportcount 15 minutes, rate</span><br><span class="line">rmthost sjdevbigdtcon01, mgrport 7809, encrypt AES128</span><br><span class="line">rmttrail ./dirdat/ga</span><br><span class="line">table EHTEMP.OGG_HADOOP_TEST;</span><br><span class="line">table EHTEMP.EMPLOYEES;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>Second, Start Capture and Pump Extract Process</p>
<ul>
<li>command<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&gt;ggsci</span><br><span class="line">&gt;dblogin useridalias ggadmin</span><br><span class="line">&gt;add trandata EHTEMP.OGG_HADOOP_TEST </span><br><span class="line">&gt;add trandata EHTEMP.EMPLOYEES </span><br><span class="line">&gt;register extract egaehio database</span><br><span class="line">&gt;add extract egaehio, integrated tranlog, begin now</span><br><span class="line">&gt;add exttrail ./dirdat/ga, extract egaehio, megabytes 1000</span><br><span class="line">&gt;add extract pga_ga, exttrailsource ./dirdat/ga begin now</span><br><span class="line">&gt;add rmttrail ./dirdat/ga, extract pga_ga, megabytes 1000</span><br><span class="line">&gt;start extract egaehio</span><br><span class="line">&gt;start extract pga_ga</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
<h2 id="GoldenGate-Replicate-to-Redshift"><a href="#GoldenGate-Replicate-to-Redshift" class="headerlink" title="GoldenGate Replicate to Redshift"></a>GoldenGate Replicate to Redshift</h2><ol>
<li><p>Create Table on Redshift</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">DROP TABLE IF EXISTS employees CASCADE;</span><br><span class="line">commit;</span><br><span class="line">CREATE TABLE employees</span><br><span class="line">(</span><br><span class="line"> employee_id     bigint         NOT NULL,</span><br><span class="line"> first_name      varchar(20),</span><br><span class="line"> last_name       varchar(25),</span><br><span class="line"> email           varchar(25),</span><br><span class="line"> phone_number    varchar(20),</span><br><span class="line"> hire_date       date,</span><br><span class="line"> job_id          varchar(10),</span><br><span class="line"> salary          numeric(8,2),</span><br><span class="line"> commission_pct  numeric(2,2),</span><br><span class="line"> manager_id      bigint,</span><br><span class="line"> department_id   bigint</span><br><span class="line">);</span><br><span class="line">commit;</span><br><span class="line">ALTER TABLE employees</span><br><span class="line"> ADD CONSTRAINT pk_employees</span><br><span class="line"> PRIMARY KEY (employee_id);</span><br><span class="line">commit;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Init Load Data<br><strong>On Source</strong></p>
<ul>
<li><p>Get SCN Filter Value</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select current_scn from v$databasse;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Configure init Extract Process and Generate init trail file<br><strong>Name:</strong> <code>iegared.prm</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sourceistable</span><br><span class="line">useridalias ggadmin</span><br><span class="line">RMTHOST sjdevbigdtcon01, MGRPORT 7809</span><br><span class="line">RMTFILE ./dirdat/iegared, MEGABYTES 2, PURGE</span><br><span class="line">table EHTEMP.EMPLOYEES,SQLPREDICATE &apos;AS OF SCN 61896071442&apos;;</span><br></pre></td></tr></table></figure>
<p><strong>Exec Below Command</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./extract paramfile dirprm/iegared.prm reportfile dirrpt/iegared.rpt</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>On OGG Big Data Server</strong></p>
<ul>
<li><p>Configure Redshift JDBC Parameter<br><strong>Name:</strong> <code>jdbc_redshift.props</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">gg.handlerlist=jdbcwriter</span><br><span class="line">gg.handler.jdbcwriter.type=jdbc</span><br><span class="line">#Handler properties for Redshift database target</span><br><span class="line">gg.handler.jdbcwriter.DriverClass=com.amazon.redshift.jdbc.Driver</span><br><span class="line">gg.handler.jdbcwriter.connectionURL=jdbc:redshift://10.16.9.81:5439/dev</span><br><span class="line">gg.handler.jdbcwriter.userName=redadmin</span><br><span class="line">gg.handler.jdbcwriter.password=xxxxxxxx</span><br><span class="line">gg.classpath=/data/oggbg/jlib/RedshiftJDBC42-1.2.10.1009.jar</span><br><span class="line">goldengate.userexit.timestamp=utc</span><br><span class="line">goldengate.userexit.writers=javawriter</span><br><span class="line">javawriter.stats.display=TRUE</span><br><span class="line">javawriter.stats.full=TRUE</span><br><span class="line">gg.log=log4j</span><br><span class="line">gg.log.level=INFO</span><br><span class="line">gg.report.time=30sec</span><br><span class="line">javawriter.bootoptions=-Xmx512m -Xms32m -Djava.class.path=.:ggjava/ggjava.jar:./dirprm</span><br></pre></td></tr></table></figure>
</li>
<li><p>Configure init Replicat Process.<br><strong>Name:</strong> <code>irbigrd.prm</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">specialrun</span><br><span class="line">end runtime</span><br><span class="line">EXTFILE ./dirdat/iegared</span><br><span class="line">DDL include all</span><br><span class="line">TARGETDB LIBFILE libggjava.so SET property=dirprm/jdbc_redshift.props</span><br><span class="line">REPORTCOUNT EVERY 1 MINUTES, RATE</span><br><span class="line">GROUPTRANSOPS 10000</span><br><span class="line">MAP EHTEMP.EMPLOYEES, TARGET public.EMPLOYEES;</span><br></pre></td></tr></table></figure>
<p><strong>Exec Below Command</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./replicat paramfile dirprm/irbigrd.prm reportfile dirrpt/irbigrd.rpt</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>Configure Replicat Process<br><strong>Name:</strong> <code>rjdbcrd.prm</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">REPLICAT rjdbcrd</span><br><span class="line">DDL include all</span><br><span class="line">DISCARDFILE ./dircrd/redshift.dsc</span><br><span class="line">TARGETDB LIBFILE libggjava.so SET property=dirprm/jdbc_redshift.props</span><br><span class="line">REPORTCOUNT EVERY 1 MINUTES, RATE</span><br><span class="line">GROUPTRANSOPS 1000</span><br><span class="line">MAP EHTEMP.EMPLOYEES, TARGET public.employees;</span><br></pre></td></tr></table></figure>
<p> <strong>Exec Below Command</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;ggsci</span><br><span class="line">&gt;add replicat rjdbcrd, exttrail ./dirdat/ga</span><br><span class="line">&gt;start replicat rjdbcrd AFTERCSN 61896071442</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="GoldenGate-Replicate-to-Flat-file"><a href="#GoldenGate-Replicate-to-Flat-file" class="headerlink" title="GoldenGate Replicate to Flat file"></a>GoldenGate Replicate to Flat file</h2><p>Oracle GoldenGate for Flat File outputs transactional data captured by Oracle GoldenGate to rolling flat files to be consumed by a third party product.Oracle GoldenGate for Flat File is implemented as a user exit provided as a shared library (.so or .dll) that integrates into the Oracle GoldenGate Extract process.<br>The user exit supports two modes of output:<br>● DSV . Delimiter Separated Values (commas are an example)<br>● LDV . Length Delimited Values</p>
<p>It can output data:<br>● All to one file<br>● One file per table<br>● One file per operation code</p>
<ol>
<li>Download GoldenGate Application Adapter<br>Copy <code>flatfilewriter.so</code> library to $OGG_HOME On OGG Big Data Server</li>
<li><p>Generate Table Define file<br><strong>Name:</strong> <code>egadef.prm</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">defsfile ./dirdef/fflue.def, PURGE</span><br><span class="line">useridalias ggadmin</span><br><span class="line">table EHTEMP.OGG_HADOOP_TEST;</span><br><span class="line">table EHTEMP.EMPLOYEES;</span><br></pre></td></tr></table></figure>
<p> <strong>Exec Below Command</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./defgen paramfile ./dirprm/egadef.prm</span><br><span class="line">scp dirdef/fflue.def RemoteHost</span><br></pre></td></tr></table></figure>
</li>
<li><p>Configure Flat Handler Parameter<br><strong>Name:</strong> <code>ffue.properties</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line">#------------------------</span><br><span class="line">#LOGGING OPTIONS</span><br><span class="line">#------------------------</span><br><span class="line">goldengate.log.logname=ffwriter</span><br><span class="line">goldengate.log.level=INFO</span><br><span class="line">goldengate.log.modules=LOGMALLOC</span><br><span class="line">goldengate.log.level.LOGMALLOC=ERROR</span><br><span class="line">goldengate.log.tostdout=false</span><br><span class="line">goldengate.log.tofile=true</span><br><span class="line">#------------------------</span><br><span class="line">#FLAT FILE WRITER OPTIONS</span><br><span class="line">#------------------------</span><br><span class="line">goldengate.flatfilewriter.writers=dsvwriter</span><br><span class="line">goldengate.userexit.chkptprefix=ffwriter_</span><br><span class="line">#------------------------</span><br><span class="line"># dsvwriter options</span><br><span class="line">#------------------------</span><br><span class="line">dsvwriter.mode=DSV</span><br><span class="line">dsvwriter.rawchars=false</span><br><span class="line">dsvwriter.includebefores=false</span><br><span class="line">dsvwriter.includecolnames=false</span><br><span class="line">dsvwriter.omitvalues=false</span><br><span class="line">dsvwriter.diffsonly=false</span><br><span class="line">dsvwriter.omitplaceholders=false</span><br><span class="line">#dsvwriter.files.onepertable=false</span><br><span class="line">dsvwriter.files.prefix=csv</span><br><span class="line">dsvwriter.files.data.rootdir=./dirout</span><br><span class="line">dsvwriter.files.data.ext=_data.dsv</span><br><span class="line">dsvwriter.files.data.tmpext=_data.dsv.temp</span><br><span class="line">dsvwriter.files.data.rollover.time=10</span><br><span class="line">#dsvwriter.files.data.rollover.size=</span><br><span class="line">dsvwriter.files.data.norecords.timeout=10</span><br><span class="line">dsvwriter.files.control.use=true</span><br><span class="line">dsvwriter.files.control.ext=_data.control</span><br><span class="line">dsvwriter.files.control.rootdir=./dirout</span><br><span class="line">dsvwriter.dsv.nullindicator.chars=&lt;NULL&gt;</span><br><span class="line">dsvwriter.dsv.fielddelim.chars=|</span><br><span class="line">dsvwriter.dsv.linedelim.chars=\n</span><br><span class="line">dsvwriter.dsv.quotes.chars=&quot;</span><br><span class="line">dsvwriter.dsv.quotes.escaped.chars=&quot;&quot;</span><br><span class="line">dsvwriter.metacols=position,txind,opcode,timestamp,schema,table</span><br><span class="line">dsvwriter.metacols.txind.fixedlen=1</span><br><span class="line">dsvwriter.metacols.txind.begin.chars=B</span><br><span class="line">dsvwriter.metacols.txind.middle.chars=M</span><br><span class="line">dsvwriter.metacols.txind.end.chars=E</span><br><span class="line">dsvwriter.files.formatstring=pump_%s_%t_%d_%05n</span><br><span class="line">#------------------------</span><br><span class="line"># ldvwriter options</span><br><span class="line">#------------------------</span><br><span class="line">ldvwriter.mode=LDV</span><br><span class="line">ldvwriter.rawchars=true</span><br><span class="line">ldvwriter.includebefores=false</span><br><span class="line">ldvwriter.includecolnames=false</span><br><span class="line">ldvwriter.files.onepertable=false</span><br><span class="line">ldvwriter.files.data.rootdir=./dirout</span><br><span class="line">ldvwriter.files.data.ext=.data</span><br><span class="line">ldvwriter.files.data.tmpext=.temp</span><br><span class="line">ldvwriter.files.data.rollover.time=10</span><br><span class="line">ldvwriter.files.data.norecords.timeout=10</span><br><span class="line">ldvwriter.files.control.use=true</span><br><span class="line">ldvwriter.files.control.ext=.ctrl</span><br><span class="line">ldvwriter.files.control.rootdir=./dirout</span><br><span class="line">ldvwriter.metacols=position,timestamp,@TOKEN-RBA,@TOKEN-POS,opcode,txind,schema,table</span><br><span class="line">ldvwriter.metacols.TOKEN-RBA.fixedlen=10</span><br><span class="line">ldvwriter.metacols.TOKEN-POS.fixedlen=10</span><br><span class="line">ldvwriter.metacols.timestamp.fixedlen=26</span><br><span class="line">ldvwriter.metacols.schema.fixedjustify=right</span><br><span class="line">ldvwriter.metacols.schema.fixedpadchar.chars=Y</span><br><span class="line">ldvwriter.metacols.opcode.fixedlen=1</span><br><span class="line">ldvwriter.metacols.opcode.insert.chars=I</span><br><span class="line">ldvwriter.metacols.opcode.update.chars=U</span><br><span class="line">ldvwriter.metacols.opcode.delete.chars=D</span><br><span class="line">ldvwriter.metacols.txind.fixedlen=1</span><br><span class="line">ldvwriter.metacols.txind.begin.chars=B</span><br><span class="line">ldvwriter.metacols.txind.middle.chars=M</span><br><span class="line">ldvwriter.metacols.txind.end.chars=E</span><br><span class="line">ldvwriter.metacols.txind.whole.chars=W</span><br><span class="line">ldvwriter.ldv.vals.missing.chars=M</span><br><span class="line">ldvwriter.ldv.vals.present.chars=P</span><br><span class="line">ldvwriter.ldv.vals.null.chars=N</span><br><span class="line">ldvwriter.ldv.lengths.record.mode=binary</span><br><span class="line">ldvwriter.ldv.lengths.record.length=4</span><br><span class="line">ldvwriter.ldv.lengths.field.mode=binary</span><br><span class="line">ldvwriter.ldv.lengths.field.length=2</span><br><span class="line">ldvwriter.files.rolloveronshutdown=false</span><br><span class="line">ldvwriter.statistics.toreportfile=false</span><br><span class="line">ldvwriter.statistics.period=onrollover</span><br><span class="line">ldvwriter.statistics.tosummaryfile=true</span><br><span class="line">ldvwriter.statistics.overall=true</span><br><span class="line">ldvwriter.statistics.summary.fileformat=schema,table,schemaandtable,total,gctimestamp,ctimestamp</span><br><span class="line">ldvwriter.statistics.summary.delimiter.chars=|</span><br><span class="line">ldvwriter.statistics.summary.eol.chars=\n</span><br><span class="line">ldvwriter.metacols.position.format=dec</span><br><span class="line">ldvwriter.writebuffer.size=36863</span><br></pre></td></tr></table></figure>
</li>
<li><p>Configure Flat Extract Process On OGG Big Data Server<br><strong>Name:</strong> <code>ffue.prm</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Extract ffue</span><br><span class="line">CUserExit flatfilewriter.so CUSEREXIT PassThru IncludeUpdateBefores, PARAMS &quot;dirprm/ffue.properties&quot;</span><br><span class="line">SourceDefs dirsql/fflue.def</span><br><span class="line">table EHTEMP.OGG_HADOOP_TEST;</span><br><span class="line">table EHTEMP.EMPLOYEES;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Init Load Data</p>
<ul>
<li><p>Get SCN Filter Value On Source</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select current_scn from v$databasse;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Configure init extract process on source<br><strong>Name:</strong> <code>iegaffl.prm</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sourceistable</span><br><span class="line">useridalias ggadmin</span><br><span class="line">RMTHOST sjdevbigdtcon01, MGRPORT 7809</span><br><span class="line">RMTFILE ./dirdat/fi000000000, MEGABYTES 2, PURGE</span><br><span class="line">table EHTEMP.OGG_HADOOP_TEST,SQLPREDICATE &apos;AS OF SCN 61896417495&apos;;</span><br><span class="line">table EHTEMP.EMPLOYEES,SQLPREDICATE &apos;AS OF SCN 61896417495&apos;;</span><br></pre></td></tr></table></figure>
<p><strong>Exec Below Command On Source</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./extract paramfile dirprm/iegaffl.prm reportfile dirrpt/iegaffl.rpt</span><br></pre></td></tr></table></figure>
<p><strong>Exec Below Command On OGG Big Data Server</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ggsci&gt; add extract ffue, extTrailSource dirdat/fi</span><br><span class="line">ggsci&gt; info ffue</span><br><span class="line">ggsci&gt; start extract ffue</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>Start Replicat Data Process<br><strong>Exec Below Command On OGG Big Data Server</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ggsci&gt; stop extract ffue</span><br><span class="line">ggsci&gt; delete extract ffue</span><br><span class="line">ggsci&gt; add extract ffue, extTrailSource dirdat/ga</span><br><span class="line">ggsci&gt; start extract ffue AFTERCSN 61896417495</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="GoldenGate-Replicate-to-Flume"><a href="#GoldenGate-Replicate-to-Flume" class="headerlink" title="GoldenGate Replicate to Flume"></a>GoldenGate Replicate to Flume</h2><h3 id="Flume-Configure-and-Start"><a href="#Flume-Configure-and-Start" class="headerlink" title="Flume Configure and Start"></a>Flume Configure and Start</h3><h3 id="OGG-Big-Data-Replicat-to-Flume"><a href="#OGG-Big-Data-Replicat-to-Flume" class="headerlink" title="OGG Big Data Replicat to Flume"></a>OGG Big Data Replicat to Flume</h3><h2 id="GoldenGate-Replicate-to-Kafka"><a href="#GoldenGate-Replicate-to-Kafka" class="headerlink" title="GoldenGate Replicate to Kafka"></a>GoldenGate Replicate to Kafka</h2><h3 id="Kafka-Configure-and-Start"><a href="#Kafka-Configure-and-Start" class="headerlink" title="Kafka Configure and Start"></a>Kafka Configure and Start</h3><h3 id="OGG-Big-Data-Replicat-to-Kafka"><a href="#OGG-Big-Data-Replicat-to-Kafka" class="headerlink" title="OGG Big Data Replicat to Kafka"></a>OGG Big Data Replicat to Kafka</h3></div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a class="article-share-link" data-url="http://BowenZhuangOutlook.github.io/2018/07/19/OGGBG/" data-id="cjk18ny9b000decqsuu7he0kq" data-qrcode="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACKklEQVR42u3aW26DQAwF0O5/0+kCaOB6PFTCnPmKaEt8qGThx89PfD6H8+2nx+vnd0uubzsYGBiPZXxOzzGg83CPnzu/n8SGgYHxHsa3DJanyM5JkBcxY2BgYASpMEmm53gMDAyMPuOclJS7SUAYGBgYnSK2mpp3MTbX4hgYGA9k5F33//98y3wDAwPjUYz7mmWd6+Vvx8DAGM1Ya5B10mi1AM5jwMDAmMpYa2ytjQQunuXSllerP4eBgfEoxlqDLEmLu8aWF7FhYGCMZuRFY3X9ojokqD4IDAyM9zDOXweraxDVJNtfv/ijiMXAwBjKqJapa0k5eWTJ4/vaL8TAwBjKyJcqOsi1UWVrfwQDA2MQI09tdzfOqkOCizdcDAyMQYy8cdYZFXR6gXkrEAMDYyqj37JfW9FYGxtEyxYYGBjjGHcsXlTTa17KRsUtBgbGaMYaJk+41S5g64UVAwNjNKMzEugPGPIlj8WBAQYGxgMZ1YDWUnO/QL34D2BgYIxmnCfH6jCyGm5+/0IVjoGBMY6RpMhqEbsr+ebDCQwMjNmMtQxd2OOIQ6wOIcozCgwMjMcyPsWTvD7mDf3qAtnFqyEGBsZQRn6qS12dojQvpDEwMN7D6C9m5X+bl83ldIyBgfECxq6m215eoWGHgYGBERei/dSZjwcwMDAw1lpseej5+KEwHsDAwBjNqL7GdZbJ1mAX98fAwBjN6JSOa4sanUHmhhEmBgbGkxi/36ozCOxswD8AAAAASUVORK5CYII=">分享</a><div class="tags"><a href="/tags/OGG/">OGG</a><a href="/tags/GoldenGate/">GoldenGate</a></div><div class="post-nav"><a class="pre" href="/2018/07/21/DB思维导图/">DB思维导图</a><a class="next" href="/2018/07/18/Hexo博客搭建/">Hexo博客搭建</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="search-form"><input id="local-search-input" placeholder="Search" type="text" name="q" results="0"/><div id="local-search-result"></div></div></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/博客/">博客</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/">技术</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/资源/">资源</a><span class="category-list-count">1</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/DB/" style="font-size: 15px;">DB</a> <a href="/tags/思维导图/" style="font-size: 15px;">思维导图</a> <a href="/tags/Hexo/" style="font-size: 15px;">Hexo</a> <a href="/tags/博客/" style="font-size: 15px;">博客</a> <a href="/tags/Github/" style="font-size: 15px;">Github</a> <a href="/tags/OGG/" style="font-size: 15px;">OGG</a> <a href="/tags/GoldenGate/" style="font-size: 15px;">GoldenGate</a> <a href="/tags/Linux/" style="font-size: 15px;">Linux</a> <a href="/tags/MongoDB/" style="font-size: 15px;">MongoDB</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/07/25/资源分享页面/">资源分享</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/07/22/Linux基础知识/">Linux基础知识</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/07/22/MongoDB基础操作/">MongoDB基础操作</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/07/21/DB思维导图/">DB思维导图</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/07/19/OGGBG/">GoldenGate Big Data 实验</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/07/18/Hexo博客搭建/">Hexo博客搭建</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="https://www.haomwei.com/" title="屠夫" target="_blank">屠夫</a><ul></ul><a href="http://www.timedifferent.com/" title="时光疯子" target="_blank">时光疯子</a><ul></ul><a href="https://blog.phpgao.com/" title="老高的技术博客" target="_blank">老高的技术博客</a><ul></ul><a href="https://blog.xizhibei.me/" title="须臾之学" target="_blank">须臾之学</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2018 <a href="/." rel="nofollow">尚武.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/search.js?v=0.0.0"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
   search_path = 'search.xml';
}
var path = '/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>